{"version":3,"file":"static/js/165.7089d219.chunk.js","mappings":"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","sources":["Components/CommonUI/CommonButton/CommonButton.tsx","webpack://social-network/./src/Components/InnerPreloader/InnerPreloader.module.scss?1560","Components/InnerPreloader/InnerPreloader.tsx","bll/selectors.ts","webpack://social-network/./src/Components/Users/Users.module.scss?5c93","webpack://social-network/./src/common/styles/Common.module.scss?6fdd","webpack://social-network/./src/Components/Users/UsersList/UsersList.module.scss?dd2b","webpack://social-network/./src/Components/Users/UserItem/UserItem.module.scss?67fd","Components/Users/UserItem/UserItem.tsx","Components/Users/UsersList/UsersList.tsx","webpack://social-network/./src/Components/Users/SortSelect/SortSelect.module.scss?d899","Components/Users/SortSelect/SortSelect.tsx","Components/Users/Users.tsx","hooks/useStickyRef.ts","hooks/useDebounceValue.ts","HOC/WithAuthRedirect.tsx"],"sourcesContent":["import { Button, ButtonProps } from 'antd';\nimport { ReactNode } from 'react';\n\ninterface IButton extends ButtonProps {\n  children?: ReactNode;\n}\n\nconst CommonButton = ({ children, ...restProps }: IButton) => {\n  return (\n    <Button {...restProps}>\n      {children}\n    </Button>\n  );\n};\n\nexport default CommonButton;","// extracted by mini-css-extract-plugin\nexport default {\"loader\":\"InnerPreloader_loader__dTCTp\",\"spinner\":\"InnerPreloader_spinner__Z0g2F\"};","import s from './InnerPreloader.module.scss';\nimport innerLoader from '../../common/Img/inner-loader.gif';\nimport React from 'react';\n\nexport const InnerPreloader = () => {\n  return <div className={s.loader}>\n    <div className={s.spinner}>\n      <img src={innerLoader} alt=\"loader\"/>\n    </div>\n  </div>;\n};","import {RootStateType} from './store';\n\nexport const usersData = (state: RootStateType) => state.usersPage\n\n","// extracted by mini-css-extract-plugin\nexport default {\"main\":\"Users_main__cKFkr\",\"scrolled\":\"Users_scrolled__-sCx9\",\"filterBlock\":\"Users_filterBlock__0Q5nL\",\"searchInput\":\"Users_searchInput__AXrQB\",\"info\":\"Users_info__IRBqF\",\"disable\":\"Users_disable__kDrCn\"};","// extracted by mini-css-extract-plugin\nexport default {\"textBlock\":\"Common_textBlock__vkqzs\",\"textArea\":\"Common_textArea__kYs+E\",\"error\":\"Common_error__5px2F\",\"container\":\"Common_container__5h0aI\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"UsersList_content__VS7w8\",\"scrolled\":\"UsersList_scrolled__P2cbG\"};","// extracted by mini-css-extract-plugin\nexport default {\"itemContainer\":\"UserItem_itemContainer__7PZJ5\",\"data\":\"UserItem_data__oahi7\",\"name\":\"UserItem_name__2U6aR\",\"status\":\"UserItem_status__2+sVs\",\"link\":\"UserItem_link__NFuTZ\",\"userPhoto\":\"UserItem_userPhoto__5CdDo\",\"button\":\"UserItem_button__qj753\"};","import { NavLink } from 'react-router-dom';\nimport userPhoto from '../../../common/Img/zoolanderDef.jpg';\nimport s from './UserItem.module.scss';\nimport React from 'react';\nimport { toggleFollow, UserType } from '../../../bll/users-reducer';\nimport { useAppDispatch, useAppSelector } from '../../../bll/hooks';\nimport CommonButton from '../../CommonUI/CommonButton/CommonButton';\n\ntype UserPropsType = {\n  u: UserType\n}\n\nexport const UserItem = ({ u }: UserPropsType) => {\n\n  const dispatch = useAppDispatch();\n  const { isFollowing } = useAppSelector(state => state.usersPage);\n  const toggleFollowHandler = () => dispatch(toggleFollow({ userID: u.id, isFollowed: u.followed }));\n\n  const isLoading = isFollowing.some(id => id === u.id);\n\n  return (\n    <div className={s.itemContainer}>\n      <NavLink className={s.link} to={'/profile/' + u.id}>\n        <img src={u.photos.small ? u.photos.small : userPhoto} className={s.userPhoto} alt={'user face'}/>\n      </NavLink>\n      <div className={s.data}>\n        <span className={s.name}>\n          <NavLink className={s.link} to={'/profile/' + u.id}>\n            {u.name}\n          </NavLink>\n        </span>\n        {u.status && <span className={s.status}>{u.status}</span>}\n      </div>\n      <CommonButton\n        className={s.button}\n        disabled={isLoading}\n        loading={isLoading}\n        onClick={toggleFollowHandler}\n      >\n        {!u.followed ? 'Follow' : 'Unfollow'}\n      </CommonButton>\n    </div>\n  );\n};","import s from './UsersList.module.scss';\nimport { InnerPreloader } from '../../InnerPreloader/InnerPreloader';\nimport { UserItem } from '../UserItem/UserItem';\nimport React, { memo } from 'react';\nimport { useAppSelector } from '../../../bll/hooks';\nimport { usersData } from '../../../bll/selectors';\n\nexport const UsersList = memo(() => {\n  const { users, isFetching } = useAppSelector(usersData);\n\n  return (\n    <div className={s.content}>\n      {isFetching && <InnerPreloader/>}\n      {users.map(u => <UserItem key={u.id} u={u}/>)}\n    </div>\n  );\n});","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"SortSelect_select__7Bo5H\"};","import React from 'react';\nimport { Select } from 'antd';\nimport { useSearchParams } from 'react-router-dom';\nimport s from './SortSelect.module.scss';\nimport { CaretDownOutlined } from '@ant-design/icons';\n\nconst pageSizeFilterValues: number[] = [3, 5, 7, 10, 20];\n\nexport const SortSelect = () => {\n  const [search, setParams] = useSearchParams();\n\n  const count = Number(search.get('count')) || 10;\n\n  const onSelectChange = (value: number) => {\n    search.set('count', String(value));\n    setParams(search);\n  };\n\n  const selectOptions = pageSizeFilterValues.map((size) => ({ value: size, label: size }));\n\n  return <Select\n    className={s.select}\n    suffixIcon={<CaretDownOutlined/>}\n    defaultValue={count || 10}\n    onChange={onSelectChange}\n    options={selectOptions}\n  />;\n};","import React, { ChangeEvent, memo, useEffect, useState } from 'react';\nimport { clearUsersData, fetchUsers } from '../../bll/users-reducer';\nimport { useAppDispatch, useAppSelector } from '../../bll/hooks';\nimport { usersData } from '../../bll/selectors';\nimport { WithAuthRedirect } from '../../HOC/WithAuthRedirect';\nimport s from './Users.module.scss';\nimport c from '../../common/styles/Common.module.scss';\nimport { UsersList } from './UsersList/UsersList';\nimport { SortSelect } from './SortSelect/SortSelect';\nimport { useStickyRef } from '../../hooks/useStickyRef';\nimport { useDebounceValue } from '../../hooks/useDebounceValue';\nimport { useSearchParams } from 'react-router-dom';\nimport { Input, Pagination } from 'antd';\n\nexport default WithAuthRedirect(memo(() => {\n  const { totalUsersCount } = useAppSelector(usersData);\n\n  const [search, setParams] = useSearchParams();\n\n  const currentPage = Number(search.get('page')) || 1;\n\n  const pageSize = Number(search.get('count')) || 10;\n\n  const { stickyRef, isSticky } = useStickyRef();\n\n  const [term, setTerm] = useState('');\n\n  const onTempChange = (e: ChangeEvent<HTMLInputElement>) => setTerm(e.currentTarget.value);\n\n  const debouncedValue = useDebounceValue<string>(term, 1500);\n\n  useEffect(() => {\n    if (term.trim()) {\n      search.set('term', term);\n      setParams(search);\n    } else {\n      search.delete('term');\n      setParams(search);\n    }\n  }, [debouncedValue]);\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(fetchUsers({ currentPage, pageSize, term }));\n  }, [currentPage, debouncedValue, dispatch, pageSize]);\n\n  useEffect(() => () => {\n    dispatch(clearUsersData());\n  }, [dispatch]);\n\n  const onPageChanged = (currentPage: number) => {\n    search.set('page', String(currentPage));\n    setParams(search);\n  };\n\n  return <div className={`${c.container} ${s.main}`}>\n    <div className={s.info}>\n      <span>\n        All users: {totalUsersCount}\n      </span>\n    </div>\n    <div ref={stickyRef} className={`${s.filterBlock} ${isSticky ? s.scrolled : ''}`}>\n      <Input placeholder=\"Enter name...\" className={s.searchInput} value={term} onChange={onTempChange} type=\"text\"/>\n      {!!totalUsersCount &&\n        <Pagination\n          showLessItems\n          showSizeChanger={false}\n          showQuickJumper={false}\n          current={currentPage}\n          total={totalUsersCount}\n          onChange={onPageChanged}\n        />}\n      <SortSelect/>\n    </div>\n    <UsersList/>\n  </div>;\n}));\n","import { useEffect, useRef, useState } from 'react';\n\nexport const useStickyRef = () => {\n  const stickyRef = useRef<HTMLDivElement>(null);\n\n  const [isSticky, setIsSticky] = useState(false);\n\n  useEffect(() => {\n    const scrollCallback = () => {\n      if (stickyRef) {\n        const windowTop = window.pageYOffset;\n        const { top } = stickyRef.current!.getBoundingClientRect();\n        if (windowTop > top) setIsSticky(true);\n        else setIsSticky(false);\n      }\n    };\n    window.addEventListener('scroll', scrollCallback);\n    return () => {\n      window.removeEventListener('scroll', scrollCallback);\n    };\n  });\n\n  return { stickyRef, isSticky };\n};","import { useEffect, useState } from 'react';\n\nexport const useDebounceValue = <T>(value: T, delay: number = 1000) => {\n  const [state, setState] = useState(value);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      setState(value);\n    }, delay);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [delay, value]);\n\n  return state;\n};","import {FC} from 'react';\nimport {Navigate} from 'react-router-dom';\nimport {useAppSelector} from '../bll/hooks';\n\nexport function WithAuthRedirect<T>(Component: FC<T>) {\n    function RedirectComponent(props: T) {\n        const {isAuth} = useAppSelector(state => state.auth)\n        if (!isAuth) return <Navigate to={'/login'}/>\n        return <Component {...props}/>\n    }\n    return RedirectComponent;\n}"],"names":["children","restProps","InnerPreloader","className","s","src","innerLoader","alt","usersData","state","usersPage","UserItem","u","dispatch","useAppDispatch","isLoading","useAppSelector","isFollowing","some","id","to","photos","small","userPhoto","name","status","CommonButton","disabled","loading","onClick","toggleFollow","userID","isFollowed","followed","UsersList","memo","users","isFetching","map","pageSizeFilterValues","SortSelect","useSearchParams","search","setParams","count","Number","get","selectOptions","size","value","label","suffixIcon","CaretDownOutlined","defaultValue","onChange","set","String","options","WithAuthRedirect","totalUsersCount","currentPage","pageSize","stickyRef","useRef","useState","isSticky","setIsSticky","useEffect","scrollCallback","windowTop","window","pageYOffset","top","current","getBoundingClientRect","addEventListener","removeEventListener","useStickyRef","term","setTerm","debouncedValue","delay","setState","timeout","setTimeout","clearTimeout","useDebounceValue","trim","delete","fetchUsers","clearUsersData","c","ref","placeholder","e","currentTarget","type","showLessItems","showSizeChanger","showQuickJumper","total","Component","props","auth","isAuth"],"sourceRoot":""}